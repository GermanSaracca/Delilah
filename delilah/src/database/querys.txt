

{ ** Nos da usuario con su id_pedido con su producto y cantidad **

SELECT
    ped.estado,
    ped.fecha,
    ped.id_pedido,
    GROUP_CONCAT(CONCAT(prod.nombre_producto, ' x ', det.cantidad)) as descripcion,
    SUM((det.cantidad * prod.valor)) as total,
    ped.formapago,
    us.fullname,
    us.direccion
FROM
    pedido as ped
    JOIN usuario as us ON(ped.id_usuario = us.id_usuario)
    JOIN pedido_detalle as det ON(ped.id_pedido = det.id_pedido)
    JOIN producto as prod ON(det.id_producto = prod.id_producto)
WHERE
    ped.id_pedido = 7;
}


{ ** Busco id de usuario segun su nombre de usuario **

    SELECT id_usuario
    FROM usuario
    WHERE username = 'German22';
}

/* source D:/Users/Ger/Desktop/ProyectoDelilah/Delilah/delilah/src/db/creacion.sql;
ADMIN
{
"user" : "German11",
"fullName" : "German Saracca",
"email": "german11@gmail.com",
"telefono" : "2494334455",
"direccion" : "Alsina 90",
"pass" : "German11"
}

USUARIOS
{
    "user" : "German22",
    "fullName" : "German Dosdos",
    "email": "german22@gmail.com",
    "telefono" : "2494678901",
    "direccion" : "Mitre 333",
    "pass" : "German22"

}
{
    "user" : "Fabian33",
    "fullName" : "Fabian Trestres",
    "email": "fabian33@gmail.com",
    "telefono" : "2494252565",
    "direccion" : "Alsina 608",
    "pass" : "Fabian33"

}
{
    "user" : "Lucas44",
    "fullName" : "Lucas Cuatro",
    "email": "lucas44@gmail.com",
    "telefono" : "2494449099",
    "direccion" : "Rodriguez 333",
    "pass" : "Lucas 44"
}
{
    "user" : "LeoMessi10",
    "fullName" : "Lionel Messi",
    "email": "messi10@gmail.com",
    "telefono" : "2494335566",
    "direccion" : "Av.Espa√±a 174",
    "pass" : "LeoMessi10"
}
*/

BODY PARA ENVIAR PRODUCTOS 
[
    {
        "formaPago": "Efectivo"
    },
    {
    "id_producto" :1,
    "cantidad" : 3
    },
        {
    "id_producto" :3,
    "cantidad" : 4
    }

]

***QUERYS***************************

INSERT INTO
    pedido (id_usuario, formapago, estado)
VALUES(2, 'Tarjeta', 'Nuevo');
SELECT
    *
FROM
    pedido_detalle;
SELECT
    *
FROM
    pedido;
SELECT
    *
FROM
    usuario;
SELECT
    id_usuario
FROM
    usuario
WHERE
    username = 'German22';

SELECT
    ped.estado,
    ped.fecha,
    ped.id_pedido,
    GROUP_CONCAT(CONCAT(prod.nombre_producto, ' x ', det.cantidad)) as descripcion,
    SUM((det.cantidad * prod.valor)) as total,
    ped.formapago,
    us.fullname,
    us.username,
    us.direccion,
    us.telefono
FROM
    pedido as ped
    JOIN usuario as us ON(ped.id_usuario = us.id_usuario)
    JOIN pedido_detalle as det ON(ped.id_pedido = det.id_pedido)
    JOIN producto as prod ON(det.id_producto = prod.id_producto)
WHERE
    ped.id_pedido = 1;

SELECT estado FROM pedido WHERE id_pedido = 3;

SELECT fecha FROM pedido WHERE id_pedido = 28;

DELETE FROM pedido WHERE id_pedido = 26;

SELECT id_usuario FROM pedido WHERE id_pedido = 10;
SELECT username FROM usuario WHERE id_usuario = 3;

SELECT id_pedido FROM pedido WHERE estado <> 'ENTREGADO';

--Productos de pedido por separado y valor unitario
SELECT
    ped.estado,
    ped.fecha,
    ped.id_pedido,
    prod.nombre_producto,
    det.cantidad,
    prod.valor as valor_unitario,
    (det.cantidad * prod.valor) as total,
    ped.formapago,
    us.fullname,
    us.username,
    us.direccion,
    us.telefono
FROM
    pedido as ped
    JOIN usuario as us ON(ped.id_usuario = us.id_usuario)
    JOIN pedido_detalle as det ON(ped.id_pedido = det.id_pedido)
    JOIN producto as prod ON(det.id_producto = prod.id_producto)
WHERE
    ped.id_pedido = 50;

//Trae los 3 pedidos mas frecuentes ordenados de mayor a menor
SELECT 
    prod.nombre_producto,
    count(*) AS veces_pedida,
    prod.valor,
    prod.id_producto
FROM
    pedido as ped
    JOIN usuario as us ON(ped.id_usuario = us.id_usuario)
    JOIN pedido_detalle as det ON(ped.id_pedido = det.id_pedido)
    JOIN producto as prod ON(det.id_producto = prod.id_producto)
WHERE
    us.username = 'German22' AND ped.estado = 'ENTREG'
GROUP BY prod.nombre_producto 
ORDER BY veces_pedida DESC
LIMIT 3;


